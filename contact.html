<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact</title>
  <link rel="stylesheet" href="meal-planner.css" />
  <style>
    .contact-wrap {
      max-width: 700px; margin: 2rem auto; padding: 1.5rem;
      background: rgba(255,255,255,.8); border-radius: 14px;
      box-shadow: 0 10px 24px rgba(0,0,0,.08);
    }
    .top-actions { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
    .quick-types { display:flex; gap:.5rem; flex-wrap:wrap; }
    .quick-types button, .btn {
      border:1px solid #e5e7eb; background:#fff; color:#0f172a;
      border-radius:999px; padding:.45rem .8rem; cursor:pointer; font:inherit;
    }
    form { display:grid; gap:.9rem; }
    label { font-weight:600; color:#334155; }
    input, textarea {
      width:100%; padding:.6rem .7rem; border:1px solid #d1d5db; border-radius:8px; font-size:1rem;
      background:#fff;
    }
    textarea { resize:vertical; min-height:120px; }
    .form-actions { display:flex; gap:.6rem; justify-content:flex-end; margin-top:.25rem; }
    .btn-primary { background:#2563eb; color:#fff; border-color:#2563eb; }
    .btn-primary:hover { background:#1d4ed8; border-color:#1d4ed8; }
  </style>
</head>
<body>
  <main class="contact-wrap">
    <div class="top-actions">
      <!-- Quick-type buttons -->
      <div class="quick-types">
        <button type="button" data-title="Bug Fix">Bug Fix</button>
        <button type="button" data-title="Recipe Request">Recipe Request</button>
        <button type="button" data-title="General Feedback">General Feedback</button>
      </div>
      <a class="btn" href="index.html">← Back to Planner</a>
    </div>

    <h1 style="margin:.2rem 0 1rem;">Contact Us</h1>

    <!-- Direct form submission to Formspree -->
    <form id="contactForm" action="https://formspree.io/f/xeorezyr" method="POST">
      <div>
        <label for="first">First Name</label>
        <input id="first" name="first" type="text" required />
      </div>
      <div>
        <label for="last">Last Name</label>
        <input id="last" name="last" type="text" required />
      </div>
      <div>
        <label for="email">Email</label>
        <input id="email" name="_replyto" type="email" required />
      </div>
      <div>
        <label for="title">Title</label>
        <input id="title" name="title" type="text" required />
      </div>
      <div>
        <label for="message">Message</label>
        <textarea id="message" name="message" required></textarea>
      </div>

      <div class="form-actions">
        <button type="button" class="btn" id="cancelBtn">Cancel</button>
        <button type="submit" class="btn btn-primary">Send</button>
      </div>
    </form>
  </main>

  <script>
    // Autofill title when quick-type buttons are clicked
    const titleInput = document.getElementById('title');
    document.querySelectorAll('.quick-types button').forEach(btn => {
      btn.addEventListener('click', () => {
        titleInput.value = btn.dataset.title || '';
        titleInput.focus();
      });
    });

    // Cancel → go back to menu
    document.getElementById('cancelBtn').addEventListener('click', () => {
      window.location.href = 'index.html';
    });

    // Intercept form submit to redirect back after success
    document.getElementById('contactForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.currentTarget;
      const data = new FormData(form);

      try {
        const res = await fetch(form.action, {
          method: form.method,
          body: data,
          headers: { 'Accept': 'application/json' }
        });

        if (res.ok) {
          window.location.href = 'index.html#contact=sent';
        } else {
          alert('There was a problem sending your message. Please try again.');
        }
      } catch (err) {
        alert('Network error. Please try again.');
      }
    });
  </script>
</body>
</html>
